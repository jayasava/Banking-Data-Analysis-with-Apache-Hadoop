/* Creating External tables in Hive and loading data from hdfs */

$hive

CREATE DATABASE bank;

USE bank;

CREATE EXTERNAL TABLE LOAN_DETAILS (
LOAN_ID INT,
USER_ID INT,
LAST_PAYMENT_DATE DATE,
INSTALLMENT DOUBLE,
DATE_PAYABLE_NEXT DATE,
PRIMARY KEY(LOAN_ID),
FOREIGN KEY(USER_ID) REFERENCES USERS(USER_ID)
)ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
LOCATION 'bank/loan_details_stg';


CREATE EXTERNAL TABLE CREDIT_CARD_DETAILS
(
CC_ID INT,
CC_NUMBER BIGINT,
USER_ID INT,
MAX_CREDIT DOUBLE,
OUTSTNDNG_BLNCE DOUBLE,
DUE_DATE DATE,
PRIMARY KEY (CC_ID),
FOREIGN KEY USER_ID REFERENCES USERS(USER_ID)
)ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
LOCATION 'bank/credit_card_details_stg';


/* FOR ANALYSIS */
CREATE EXTERNAL TABLE SHARES_DETAILS
(
SHARE_ID VARCHAR(10),
CMPNY_NM varchar(20),
GMT_TMSTMP bigint,
SHR_PRICE DOUBLE
)ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
LOCATION 'bank/shares_details_stg';

